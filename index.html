<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Habit Commit</title>
        <link rel="stylesheet" type="text/css" href="style.css"></>
    </head>
    <body>

        <h1>Habit Commit</h1>

        <div class="calendar">
            <div class="day"></div>
            <div class="day level-1"></div>
            <div class="day level-2"></div>
            <div class="day level-3"></div>
            <div class="day level-1"></div>
            <div class="day"></div>
            <div class="day level-2"></div>
            <div class="day"></div>
            <div class="day level-1"></div>
            <div class="day level-2"></div>
            <div class="day level-3"></div>
            <div class="day level-1"></div>
            <div class="day"></div>
            <div class="day level-2"></div>

            <div class="day level-1"></div>
            <div class="day level-3"></div>
            <div class="day"></div>
            <div class="day level-1"></div>
            <div class="day level-4"></div>
            <div class="day level-2"></div>
            <div class="day"></div>

        </div>

        <div class="legend">
            Less
            <span style="background-color: #161b22;"></span>
            <span style="background-color: #9be9a8;"></span>
            <span style="background-color: #40c463;"></span>
            <span style="background-color: #30a14e;"></span>
            <span style="background-color: #216e39;"></span>
            More
        </div>

        </div>

        <div class="charts">
            <div class="chart-placeholder"></div>
            <div class="chart-placeholder"></div>
        </div>

        <div style="margin-top: 30px;">
            <div id="timer" style="font-size: 48px;">25:00</div>
            <button id="start">Start Pomodoro</button>
        </div>

        <div style="margin-top: 40px;">
            <h2>Pomodoro Timer</h2>
            <div id="timer" style="font-size: 40px; margin: 10px;">25:00</div>
            <button onclick="startTimer()">Start</button>
            <button onclick="stopTimer()">Stop</button>
            <button onclick="resetTimer()">Reset</button>
        </div>

        <script>
            let timer;
            let seconds = 25 * 60; // 25分
            const display = document.getElementById('timer');
            const startButton = document.getElementById('start');

            function updateTimerDisplay() {
                const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
                const secs = String(seconds % 60).padStart(2, '0');
                display.textContent = `${mins}:${secs}`;
            }

            function growGrass() {
                const today = new Date().getDate();
                const allDays = document.querySelectorAll('.calendar .day');
                allDays.forEach(day => {
                    if (day.textContent === String(today)) {
                        if (day.classList.contains('level-1')) {
                            day.classList.remove('level-1');
                            day.classList.add('level-2');
                        } else if (day.classList.contains('level-2')) {
                            day.classList.remove('level-2');
                            day.classList.add('level-3');
                        } else if (day.classList.contains('level-3')) {
                            day.classList.remove('level-3');
                            day.classList.add('level-4');
                        } else if (!day.className.includes('level')) {
                            day.classList.add('level-1');
                        }
                    }
                });
            }

            function startTimer() {
                if (timer) clearInterval(timer);
                seconds = 25 * 60; // reset
                updateTimerDisplay();

                timer = setInterval(() => {
                    seconds--;
                    updateTimerDisplay();

                    if (seconds <= 0) {
                        clearInterval(timer);
                        growGrass(); // ⬅️ ここで草を育てる！
                        alert("お疲れ様！草が育ちました🌱");
                    }
                }, 1000);
            }

            startButton.addEventListener('click', startTimer);
        </script>
    </body>
</html>
